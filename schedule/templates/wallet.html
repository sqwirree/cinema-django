{% extends 'base.html' %}
{% block title %}–ú—ñ–π –≥–∞–º–∞–Ω–µ—Ü—å{% endblock %}

{% block extra_css %}
<style>
/* –û–±—ë—Ä—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–∞–º–∞–Ω—Ü—è */
.wallet-page {
  min-height: calc(100vh - 80px);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 40px 15px 50px 15px;
}

/* –§–æ–Ω –¥–ª—è —Ü—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ */
body {
  background: radial-gradient(circle at center, #000, #0b0b0b);
  background-image: url('https://www.transparenttextures.com/patterns/dark-mosaic.png');
  background-color: #0b0b0b;
  color: #fff;
  min-height: 100vh;
  font-family: 'Poppins', sans-serif;
  overflow-x: hidden;
}

/* üí∞ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–∞–º–∞–Ω—Ü—è */
.wallet-container {
  width: 100%;
  max-width: 820px;
  margin: 0 auto;
  background: rgba(20, 20, 20, 0.92);
  border-radius: 20px;
  padding: 40px 50px;
  box-shadow: 0 0 35px rgba(229, 9, 20, 0.25), 0 0 15px rgba(255, 215, 0, 0.15);
  position: relative;
  z-index: 2;
  backdrop-filter: blur(6px);
  transition: all 0.4s ease;
}
.wallet-container:hover {
  box-shadow: 0 0 45px rgba(229, 9, 20, 0.35), 0 0 25px rgba(255, 215, 0, 0.25);
}

/* üåü –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
.wallet-container h1 {
  text-align: center;
  color: #FFD700;
  font-size: 2.4rem;
  margin-bottom: 25px;
  text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
  letter-spacing: 1px;
}

/* üí∏ –ë–∞–ª–∞–Ω—Å */
.wallet-balance {
  text-align: center;
  margin-bottom: 35px;
}
.wallet-balance h2 {
  color: #fff;
  font-weight: 500;
  font-size: 1.5rem;
  margin-bottom: 10px;
}
.wallet-balance span {
  color: #e50914;
  font-weight: bold;
  font-size: 1.9rem;
  text-shadow: 0 0 10px rgba(229, 9, 20, 0.7);
  transition: 0.3s;
}
.wallet-balance span:hover {
  text-shadow: 0 0 18px rgba(255, 80, 80, 0.9);
}

/* –ö–Ω–æ–ø–∫–∞ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –±—ñ–ª—è –±–∞–ª–∞–Ω—Å—É */
.deposit-btn {
  background-color: #13b83f;
  color: #fff;
  text-decoration: none;
  font-weight: bold;
  margin-left: 15px;
  padding: 8px 14px;
  border-radius: 8px;
  font-size: 0.9rem;
  transition: 0.3s;
  box-shadow: 0 0 10px rgba(19, 184, 63, 0.5);
  display: inline-block;
}
.deposit-btn:hover {
  background-color: #17e24c;
  box-shadow: 0 0 16px rgba(23, 226, 76, 0.6);
  transform: scale(1.05);
}

/* üí´ –ï—Ñ–µ–∫—Ç –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É */
@keyframes balancePulse {
  0% { text-shadow: 0 0 10px rgba(229,9,20,0.6); }
  50% { text-shadow: 0 0 20px rgba(255,50,50,0.9); }
  100% { text-shadow: 0 0 10px rgba(229,9,20,0.6); }
}
.wallet-balance span.glow {
  animation: balancePulse 1.5s infinite;
}

/* üéüÔ∏è –§–æ—Ä–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥—É */
.promo-form {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 30px;
  flex-wrap: wrap;
}
.promo-form input {
  background: rgba(0, 0, 0, 0.4);
  border: 2px solid #FFD700;
  border-radius: 8px;
  padding: 12px 18px;
  color: #fff;
  width: 60%;
  min-width: 220px;
  outline: none;
  transition: 0.3s;
  font-size: 1rem;
}
.promo-form input:focus {
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.5);
}
.promo-form button {
  background-color: #e50914;
  border: none;
  border-radius: 8px;
  padding: 12px 22px;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(229, 9, 20, 0.4);
}
.promo-form button:hover {
  background-color: #ff1a24;
  box-shadow: 0 6px 16px rgba(255, 26, 36, 0.45);
  transform: scale(1.03);
}

/* üì© –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è */
.messages {
  list-style: none;
  padding: 0;
  margin: 0 0 25px;
  text-align: center;
}
.messages li {
  margin: 8px 0;
  padding: 10px 15px;
  border-radius: 10px;
  display: inline-block;
  font-weight: bold;
  font-size: 0.95rem;
}
.messages .success {
  background: rgba(0, 255, 100, 0.15);
  color: #4aff9a;
  border: 1px solid #4aff9a;
  text-shadow: 0 0 6px rgba(74, 255, 154, 0.6);
}
.messages .error {
  background: rgba(255, 50, 50, 0.15);
  color: #ff6262;
  border: 1px solid #ff6262;
  text-shadow: 0 0 6px rgba(255, 98, 98, 0.6);
}

/* üìú –¢–∞–±–ª–∏—Ü—è –æ–ø–µ—Ä–∞—Ü—ñ–π */
.table-wrapper {
  width: 100%;
  overflow-x: auto;
}
table {
  width: 100%;
  border-collapse: collapse;
  background: rgba(10, 10, 10, 0.5);
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.1);
}
table th, table td {
  padding: 14px;
  text-align: center;
  white-space: nowrap;
}
table th {
  background: rgba(255, 215, 0, 0.1);
  color: #FFD700;
  font-weight: bold;
  text-transform: uppercase;
  font-size: 0.95rem;
}
table tr:nth-child(even) {
  background: rgba(255, 255, 255, 0.03);
}
table tr:hover {
  background: rgba(255, 215, 0, 0.08);
  transition: 0.3s;
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–Ü—Å—Ç–æ—Ä—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ–π" */
.wallet-history-title {
  color:#FFD700;
  text-align:center;
  margin-bottom:15px;
  margin-top: 10px;
}

/* üì± –ê–î–ê–ü–¢–ò–í */

/* –¢–µ–ª–µ—Ñ–æ–Ω—ã */
@media (max-width: 600px) {
  .wallet-page {
    padding: 20px 10px 30px 10px;
  }

  .wallet-container {
    padding: 24px 16px;
    border-radius: 16px;
  }

  .wallet-container h1 {
    font-size: 1.9rem;
    margin-bottom: 18px;
  }

  .wallet-balance h2 {
    font-size: 1.25rem;
  }

  .wallet-balance span {
    font-size: 1.6rem;
    display: block;
    margin-top: 6px;
  }

  .deposit-btn {
    display: inline-block;
    margin-left: 0;
    margin-top: 8px;
    font-size: 0.85rem;
    padding: 6px 12px;
  }

  .promo-form {
    flex-direction: column;
    align-items: stretch;
  }

  .promo-form input {
    width: 100%;
  }

  .promo-form button {
    width: 100%;
    padding: 10px;
  }

  table th, table td {
    padding: 10px 8px;
    font-size: 0.85rem;
  }
}

/* –ü–ª–∞–Ω—à–µ—Ç—ã */
@media (min-width: 601px) and (max-width: 991px) {
  .wallet-page {
    padding: 30px 15px 40px 15px;
  }

  .wallet-container {
    padding: 32px 26px;
  }

  table th, table td {
    padding: 12px;
  }
}

/* –î–µ—Å–∫—Ç–æ–ø—ã */
@media (min-width: 992px) {
  .wallet-page {
    padding-top: 60px;
  }
}
</style>
{% endblock %}

{% block content %}
<div class="wallet-page">
  <div class="wallet-container">
    <h1>üí∞ –ú—ñ–π –≥–∞–º–∞–Ω–µ—Ü—å</h1>

    <div class="wallet-balance">
      <h2>
        –ë–∞–ª–∞–Ω—Å:
        <span class="glow">{{ wallet.balance }}‚Ç¥</span>
        <a href="{% url 'wallet_deposit' %}" class="deposit-btn">–ü–æ–ø–æ–≤–Ω–∏—Ç–∏</a>
      </h2>
    </div>

    <form method="POST" class="promo-form">
      {% csrf_token %}
      <input type="text" name="code" placeholder="–í–≤–µ–¥—ñ—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥" required>
      <button type="submit">–ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏</button>
    </form>

    {% if messages %}
      <ul class="messages">
        {% for msg in messages %}
          <li class="{{ msg.tags }}">{{ msg }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <h3 class="wallet-history-title">üìú –Ü—Å—Ç–æ—Ä—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ–π</h3>
    <div class="table-wrapper">
      <table>
        <tr>
          <th>–¢–∏–ø</th><th>–°—É–º–∞</th><th>–û–ø–∏—Å</th><th>–î–∞—Ç–∞</th>
        </tr>
        {% for t in transactions %}
          <tr>
            <td>{{ t.get_type_display }}</td>
            <td>{{ t.amount }}‚Ç¥</td>
            <td>{{ t.description }}</td>
            <td>{{ t.created_at|date:"d.m.Y H:i" }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="4">–û–ø–µ—Ä–∞—Ü—ñ–π –Ω–µ–º–∞—î</td></tr>
        {% endfor %}
      </table>
    </div>
  </div>
</div>
{% endblock %}
